{{ define "main" }}


{{ $years := slice }}

{{ range sort .Params.publications "year" "desc"}}
{{ $years = $years | append .year}}
{{ end }}
{{ $years = $years | uniq }}


{{ range $elem_val := $years }}

<h2>{{$elem_val}}</h2>
<hr>

{{range $element := $.Params.publications }}

{{if and (eq $element.year $elem_val) (not (eq $element.draft "true")) }}

{{ partial "publication.html" . }}

{{ end }}



{{ end }}


{{ end }}

{{ end }}